<!DOCTYPE html>
<html>
<head>
  <title>JSON to Table</title>
  <style>
    table {
      border-collapse: collapse;
      width: 80%;
      margin: 20px auto;
    }

    th, td {
      border: 1px solid #dddddd;
      text-align: center;
      padding: 8px;
    }

    th {
      background-color: #f2f2f2;
    }
  </style>
</head>
<body>

  <table id="history-table">
    <!-- Table content will be generated here -->
  </table>

  <script>
    // Fetch JSON data using the fetch API
    fetch('https://b526772d5e26248dc7d8952b8d4d5551.balena-devices.com/info')
      .then(response => {
        if (!response.ok) {
          throw new Error('Network response was not ok');
        }
        return response.json();
      })
      .then(data => {
        // Extract history from the wind object
        const historyData = data.wind.history;

        // Create a table structure
        const table = document.getElementById('history-table');

        // Create header row
        const headerRow = table.createTHead().insertRow(0);
        const headers = ['Column ID', 'Column "angle"', 'Column "time"', 'Column "updated"'];
        headers.forEach(headerText => {
          const th = document.createElement('th');
          th.textContent = headerText;
          headerRow.appendChild(th);
        });

        // Create table body with data rows in reverse order
        const tbody = document.createElement('tbody');
        const keys = Object.keys(historyData);
        for (let i = keys.length - 1; i >= 0; i--) {
          const rowData = historyData[keys[i]];
          const row = tbody.insertRow();
          row.insertCell().textContent = keys[i];
          row.insertCell().textContent = rowData.angle;
          row.insertCell().textContent = rowData.time;
          row.insertCell().textContent = rowData.updated;
        }
        table.appendChild(tbody);
      })
      .catch(error => {
        console.error('There was a problem fetching the data:', error);
      });
  </script>

</body>
</html>
